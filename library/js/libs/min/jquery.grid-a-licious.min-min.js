!function($,i){var t=function(i,t,s){var e;return function n(){function n(){s||i.apply(o,r),e=null}var o=this,r=arguments;e?clearTimeout(e):s&&i.apply(o,r),e=setTimeout(n,t||150)}};jQuery.fn[i]=function(s){return s?this.bind("resize",t(s)):this.trigger(i)}}(jQuery,"smartresize"),function($){$.Gal=function(i,t){this.element=$(t),this._init(i)},$.Gal.settings={selector:".item",width:225,gutter:20,animate:!1,animationOptions:{speed:200,duration:300,effect:"fadeInOnAppear",queue:!0,complete:function(){}}},$.Gal.prototype={_init:function(i){var t=this;this.name=this._setName(5),this.gridArr=[],this.gridArrAppend=[],this.gridArrPrepend=[],this.setArr=!1,this.setGrid=!1,this.setOptions,this.cols=0,this.itemCount=0,this.prependCount=0,this.isPrepending=!1,this.appendCount=0,this.resetCount=!0,this.ifCallback=!0,this.box=this.element,this.boxWidth=this.box.width(),this.options=$.extend(!0,{},$.Gal.settings,i),this.gridArr=$.makeArray(this.box.find(this.options.selector)),this.isResizing=!1,this.w=0,this.boxArr=[],this._setCols(),this._renderGrid("append"),$(this.box).addClass("gridalicious"),$(window).smartresize(function(){t.resize()})},_setName:function(i,t){return t=t?t:"",i?this._setName(--i,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".charAt(Math.floor(60*Math.random()))+t):t},_setCols:function(){this.cols=Math.floor(this.box.width()/this.options.width),this.cols<1&&(this.cols=1),diff=(this.box.width()-this.cols*this.options.width-this.options.gutter)/this.cols,w=(this.options.width+diff)/this.box.width()*100,this.w=w;for(var i=0;i<this.cols;i++){var t=$("<div></div>").addClass("galcolumn").attr("id","item"+i+this.name).css({width:w+"%",paddingLeft:this.options.gutter,paddingBottom:this.options.gutter,"float":"left","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","-o-box-sizing":"border-box","box-sizing":"border-box"});this.box.append(t)}this.box.find($("#clear"+this.name)).remove();var s=$("<div></div>").css({clear:"both",height:"0",width:"0",display:"block"}).attr("id","clear"+this.name);this.box.append(s)},_renderGrid:function(i,t,s,e){var n=[],o=[],r=[],h=0,a=this.prependCount,d=this.appendCount,p=this.options.gutter,c=this.cols,l=this.name,u=0,f=$(".galcolumn").width();t?(o=t,"append"==i&&(d+=s,h=this.appendCount),"prepend"==i&&(this.isPrepending=!0,h=Math.round(s%c),0>=h&&(h=c)),"renderAfterPrepend"==i&&(d+=s,h=s)):(o=this.gridArr,d=$(this.gridArr).size()),$.each(o,function(t,s){var e=$(s),o="100%";e.hasClass("not-responsive")&&(o="auto"),e.css({marginBottom:p,zoom:"1",filter:"alpha(opacity=0)",opacity:"0"}).find("img, object, embed, iframe").css({width:o,height:"auto",display:"block","margin-left":"auto","margin-right":"auto"}),"prepend"==i?(h--,$("#item"+h+l).prepend(e),n.push(e),0==h&&(h=c)):($("#item"+h+l).append(e),n.push(e),h++,h>=c&&(h=0),d>=c&&(d-=c))}),this.appendCount=d,this.itemCount=h,"append"==i||"prepend"==i?("prepend"==i&&this._updateAfterPrepend(this.gridArr,o),this._renderItem(n),this.isPrepending=!1):this._renderItem(this.gridArr)},_collectItems:function(){var i=[];return $(this.box).find(this.options.selector).each(function(t){i.push($(this))}),i},_renderItem:function(i){var t=this.options.animationOptions.speed,s=this.options.animationOptions.effect,e=this.options.animationOptions.duration,n=this.options.animationOptions.queue,o=this.options.animate,r=this.options.animationOptions.complete,h=0,a=0;o!==!0||this.isResizing?($.each(i,function(i,t){$(t).css({opacity:"1",filter:"alpha(opacity=1)"})}),this.ifCallback&&r.call(i)):(n===!0&&"fadeInOnAppear"==s?(this.isPrepending&&i.reverse(),$.each(i,function(s,n){setTimeout(function(){$(n).animate({opacity:"1.0"},e),a++,a==i.length&&r.call(void 0,i)},h*t),h++})):n===!1&&"fadeInOnAppear"==s&&(this.isPrepending&&i.reverse(),$.each(i,function(t,s){$(s).animate({opacity:"1.0"},e),a++,a==i.length&&this.ifCallback&&r.call(void 0,i)})),n!==!0||s||$.each(i,function(t,s){$(s).css({opacity:"1",filter:"alpha(opacity=1)"}),a++,a==i.length&&this.ifCallback&&r.call(void 0,i)}))},_updateAfterPrepend:function(i,t){var s=this.gridArr;$.each(t,function(i,t){s.unshift(t)}),this.gridArr=s},resize:function(){this.box.width()!==this.boxWidth&&(this.box.find($(".galcolumn")).remove(),this._setCols(),this.ifCallback=!1,this.isResizing=!0,this._renderGrid("append"),this.ifCallback=!0,this.isResizing=!1,this.boxWidth=this.box.width())},append:function(i){var t=this.gridArr,s=this.gridArrPrepend;$.each(i,function(i,e){t.push(e),s.push(e)}),this._renderGrid("append",i,$(i).size())},prepend:function(i){this.ifCallback=!1,this._renderGrid("prepend",i,$(i).size()),this.ifCallback=!0}},$.fn.gridalicious=function(i,t){return this.each("string"==typeof i?function(){var s=$.data(this,"gridalicious");s[i].apply(s,[t])}:function(){$.data(this,"gridalicious",new $.Gal(i,this))}),this}}(jQuery);